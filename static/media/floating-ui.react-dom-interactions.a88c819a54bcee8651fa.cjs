"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),reactDom=require("@floating-ui/react-dom"),pointInPolygon=require("point-in-polygon"),reactDom$1=require("react-dom"),ariaHidden=require("aria-hidden");function _interopDefaultLegacy(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var React__namespace=_interopNamespace(React),React__default=_interopDefaultLegacy(React),pointInPolygon__default=_interopDefaultLegacy(pointInPolygon),index="undefined"!==typeof document?React.useLayoutEffect:React.useEffect;function createPubSub(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter((e=>e!==n)))}}}let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+count++;function useFloatingId(){const[e,t]=React__namespace.useState((()=>serverHandoffComplete?genId():void 0));return index((()=>{null==e&&t(genId())}),[]),React__namespace.useEffect((()=>{serverHandoffComplete||(serverHandoffComplete=!0)}),[]),e}const useReactId=React__namespace["useId".toString()],useId=null!=useReactId?useReactId:useFloatingId,FloatingNodeContext=React.createContext(null),FloatingTreeContext=React.createContext(null),useFloatingParentNodeId=()=>{var e,t;return null!=(e=null==(t=React.useContext(FloatingNodeContext))?void 0:t.id)?e:null},useFloatingTree=()=>React.useContext(FloatingTreeContext),useFloatingNodeId=()=>{const e=useId(),t=useFloatingTree(),n=useFloatingParentNodeId();return index((()=>{const r={id:e,parentId:n};return null==t||t.addNode(r),()=>{null==t||t.removeNode(r)}}),[t,e,n]),e},FloatingNode=e=>{let{children:t,id:n}=e;const r=useFloatingParentNodeId();return React__default.default.createElement(FloatingNodeContext.Provider,{value:React.useMemo((()=>({id:n,parentId:r})),[n,r])},t)},FloatingTree=e=>{let{children:t}=e;const n=React.useRef([]),r=React.useCallback((e=>{n.current=[...n.current,e]}),[]),o=React.useCallback((e=>{n.current=n.current.filter((t=>t!==e))}),[]),u=React.useState((()=>createPubSub()))[0];return React__default.default.createElement(FloatingTreeContext.Provider,{value:React.useMemo((()=>({nodesRef:n,addNode:r,removeNode:o,events:u})),[n,r,o,u])},t)};function mergeProps(e,t,n){const r={};return{..."floating"===n&&{tabIndex:-1},...e,...t.map((e=>e?e[n]:null)).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,o]=t;0===n.indexOf("on")?(r[n]||(r[n]=[]),"function"===typeof o&&r[n].push(o),e[n]=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];r[n].forEach((e=>e(...t)))}):e[n]=o})),e):e),{})}}const useInteractions=function(e){return void 0===e&&(e=[]),{getReferenceProps:t=>mergeProps(t,e,"reference"),getFloatingProps:t=>mergeProps(t,e,"floating"),getItemProps:t=>mergeProps(t,e,"item")}};function getDocument(e){var t;return null!=(t=null==e?void 0:e.ownerDocument)?t:document}function getWindow(e){var t;return null!=(t=getDocument(e).defaultView)?t:window}function isElement(e){return!!e&&e instanceof getWindow(e).Element}function isHTMLElement(e){return!!e&&e instanceof getWindow(e).HTMLElement}function getChildren(e,t){var n;let r=null!=(n=null==e?void 0:e.nodesRef.current.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})))?n:[],o=r;for(;o.length;){var u;o=null!=(u=null==e?void 0:e.nodesRef.current.filter((e=>{var t;return null==(t=o)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})))?u:[],r=r.concat(o)}return r}function safePolygon(e){let t,{restMs:n=0,buffer:r=1,debug:o=null}=void 0===e?{}:e;return e=>{let{x:u,y:c,placement:i,refs:a,onClose:l,nodeId:s,tree:f}=e;return function(e){var d;if(clearTimeout(t),e.pointerType&&"mouse"!==e.pointerType)return;const{target:g,clientX:v,clientY:p}=e,m=g;if("pointermove"===e.type&&isElement(a.reference.current)&&a.reference.current.contains(m)||null!=(d=a.floating.current)&&d.contains(m))return;if(f&&getChildren(f,s).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if(!a.reference.current||!a.floating.current||null==i||null==u||null==c)return;const R=a.reference.current.getBoundingClientRect(),E=a.floating.current.getBoundingClientRect(),y=i.split("-")[0],x=u>E.right-E.width/2,b=c>E.bottom-E.height/2;switch(y){case"top":if(v>=E.left&&v<=E.right&&p>=E.bottom&&p<=R.top)return;break;case"bottom":if(v>=E.left&&v<=E.right&&p>=R.bottom&&p<=E.top)return;break;case"left":if(v>=E.right&&v<=R.left&&p>=E.left&&p<=E.right)return;break;case"right":if(v>=E.right&&v<=R.left&&p>=E.right&&p<=R.left)return}const h=function(e){let[t,n]=e;const o=E.width>R.width,u=E.height>R.height;switch(y){case"top":{const e=[o?t:x?t+r:t-r,n+r],u=[o?t:x?t-r:t+r,n+r],c=[[E.left,x||o?E.bottom-r:E.top],[E.right,x?o?E.bottom-r:E.top:E.bottom-r]];return x?[e,u,...c]:[e,...c,u]}case"bottom":{const e=[o?t:x?t+r:t-r,n-r],u=[o?t:x?t-r:t+r,n-r],c=[[E.left,x||o?E.top+r:E.bottom],[E.right,x?o?E.top+r:E.bottom:E.top+r]];return x?[e,u,...c]:[e,...c,u]}case"left":{const e=[t+r,u?n:b?n-r:n+r],o=[t+r,u?n:b?n+r:n-r],c=[[b||u?E.right-r:E.left,E.top],[b?u?E.right-r:E.left:E.right-r,E.bottom]];return b?[e,...c,o]:[...c,e,o]}case"right":{const e=[t-r,u?n:b?n+r:n-r],o=[t-r,u?n:b?n-r:n+r],c=[[b||u?E.left+r:E.right,E.top],[b?u?E.left+r:E.right:E.left+r,E.bottom]];return b?[e,o,...c]:[e,...c,o]}}}([u,c]);"production"!==process.env.NODE_ENV&&(null==o||o(h.slice(0,4).join(", "))),pointInPolygon__default.default([v,p],h)?n&&(t=setTimeout(l,n)):(clearTimeout(t),l())}}}const DEFAULT_ID="floating-ui-root",FloatingPortal=e=>{let{children:t,id:n=DEFAULT_ID}=e;const[r,o]=React.useState(!1),u=React.useRef(null);return index((()=>{const e=document.getElementById(n);e?u.current=e:(u.current=document.createElement("div"),u.current.id=n);const t=u.current;document.body.contains(t)||document.body.appendChild(t),o(!0)}),[n]),r&&u.current?reactDom$1.createPortal(t,u.current):null};function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}const identifier="data-floating-ui-scroll-lock",FloatingOverlay=React.forwardRef((function(e,t){let{lockScroll:n=!1,...r}=e;return index((()=>{if(!n)return;const e=window.pageXOffset,t=window.pageYOffset,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth;return document.body.hasAttribute(identifier)?void 0:(Object.assign(document.body.style,{position:"fixed",overflow:"hidden",top:"-"+t+"px",left:"-"+e+"px",right:"0",[r]:o+"px"}),document.body.setAttribute(identifier,""),()=>{Object.assign(document.body.style,{position:"",overflow:"",top:"",left:"",right:"",[r]:""}),document.body.removeAttribute(identifier),window.scrollTo(e,t)})}),[n]),React__default.default.createElement("div",_extends({ref:t},r,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}}))}));function stopEvent(e){e.preventDefault(),e.stopPropagation()}function useLatestRef(e){const t=React.useRef(e);return index((()=>{t.current=e})),t}function focus$1(e){requestAnimationFrame((()=>{null==e||e.focus()}))}const SELECTOR="input:not([type='hidden']):not([disabled]),select:not([disabled]),textarea:not([disabled]),a[href],button:not([disabled]),[tabindex],iframe,object,embed,area[href],audio[controls],video[controls],[contenteditable]:not([contenteditable='false'])",FocusGuard=React.forwardRef((function(e,t){return React__default.default.createElement("span",_extends({},e,{ref:t,tabIndex:0,style:{position:"fixed",opacity:"0",pointerEvents:"none",outline:"0"}}))}));function FloatingFocusManager(e){let{context:{refs:t,nodeId:n,onOpenChange:r},children:o,order:u=["content"],endGuard:c=!0,preventTabbing:i=!1,initialFocus:a=0,returnFocus:l=!0,modal:s=!0}=e;const f=useLatestRef(u),d=useLatestRef(r),g=useFloatingTree(),v=React.useCallback((()=>f.current.map((e=>{return isHTMLElement(t.reference.current)&&"reference"===e?t.reference.current:t.floating.current&&"floating"===e?t.floating.current:"content"===e?Array.from(null!=(n=null==(r=t.floating.current)?void 0:r.querySelectorAll(SELECTOR))?n:[]):null;var n,r})).flat().filter((e=>{if(e===t.floating.current||e===t.reference.current)return!0;if(isHTMLElement(e)){var n;return"-"!==(null!=(n=e.getAttribute("tabindex"))?n:"0")[0].trim()}}))),[f,t.floating,t.reference]);return React.useEffect((()=>{const e=0===v().filter((e=>e!==t.floating.current&&e!==t.reference.current)).length;function n(n){if("Tab"===n.key){(i||e)&&stopEvent(n);const r=v();"reference"===f.current[0]&&n.target===t.reference.current&&(stopEvent(n),n.shiftKey?focus$1(r[r.length-1]):focus$1(r[1])),"floating"===f.current[1]&&n.target===t.floating.current&&n.shiftKey&&(stopEvent(n),focus$1(r[0]))}}const r=getDocument(t.floating.current);return r.addEventListener("keydown",n),()=>{r.removeEventListener("keydown",n)}}),[i,v,f,t.floating,t.reference]),React.useEffect((()=>{function e(e){var r;const o=e.relatedTarget;null!=(r=t.floating.current)&&r.contains(o)||!isElement(t.reference.current)||t.reference.current.contains(o)||g&&getChildren(g,n).some((e=>{var t,n;return null==(t=e.context)||null==(n=t.refs.floating.current)?void 0:n.contains(o)}))||d.current(!1)}const r=t.floating.current,o=t.reference.current;if(r&&isHTMLElement(o)){!s&&r.addEventListener("focusout",e);const t=s?ariaHidden.hideOthers(r):null;return()=>{!s&&r.removeEventListener("focusout",e),null==t||t()}}}),[n,g,s,d,v,a,t.floating,t.reference]),React.useEffect((()=>{var e;if(i)return;const n=t.floating.current,r=null!=(e=getDocument(n).activeElement)?e:document.activeElement;var o;if("number"===typeof a)focus$1(null!=(o=v()[a])?o:n);else if(isHTMLElement(null==a?void 0:a.current)){var u;focus$1(null!=(u=a.current)?u:n)}return()=>{l&&isHTMLElement(r)&&focus$1(r)}}),[i,v,a,s,l,t.floating]),React__default.default.createElement(React__default.default.Fragment,null,s&&React__default.default.createElement(FocusGuard,{onFocus:e=>{stopEvent(e);const t=v();"reference"===u[0]?focus$1(t[0]):focus$1(t[t.length-1])}}),React.cloneElement(o,u.includes("floating")?{tabIndex:0}:{}),s&&c&&React__default.default.createElement(FocusGuard,{onFocus:e=>{stopEvent(e),focus$1(v()[0])}}))}function getDelay(e,t,n){return n&&"mouse"!==n?0:"number"===typeof e?e:null==e?void 0:e[t]}const useHover=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:o=null,mouseOnly:u=!1,restMs:c=0}=void 0===t?{}:t;const{open:i,onOpenChange:a,dataRef:l,events:s,refs:f}=e,d=useFloatingTree(),g=useLatestRef(a),v=useLatestRef(o),p=React.useRef(),m=React.useRef(),R=React.useRef(),E=React.useRef(),y=React.useRef(!0);index((()=>{n&&(i||(p.current=void 0))})),React.useEffect((()=>{if(n)return s.on("dismiss",e),()=>{s.off("dismiss",e)};function e(){clearTimeout(m.current),clearTimeout(E.current),y.current=!0}}),[n,s,f.floating]),React.useEffect((()=>{if(!n||!v.current)return;function e(){var e;null!=(e=l.current.openEvent)&&e.type.includes("mouse")&&g.current(!1)}const t=getDocument(f.floating.current).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[f.floating,g,n,v,l]);const x=React.useCallback((function(e){void 0===e&&(e=!0),r&&!R.current?(clearTimeout(m.current),m.current=setTimeout((()=>g.current(!1)),getDelay(r,"close",p.current))):e&&g.current(!1)}),[r,g]),b=React.useCallback((()=>{R.current&&(getDocument(f.floating.current).removeEventListener("pointermove",R.current),R.current=void 0)}),[f.floating]);if(React.useEffect((()=>{i||b()}),[i,n,b]),React.useEffect((()=>{if(!n)return;function t(e){clearTimeout(m.current),y.current=!1,i||u&&"mouse"!==p.current||c>0&&0===getDelay(r,"open")||(l.current.openEvent=e,r?m.current=setTimeout((()=>{g.current(!0)}),getDelay(r,"open",p.current)):g.current(!0))}function o(t){var n,r;if("click"===(null==(n=l.current.openEvent)?void 0:n.type)||"pointerdown"===(null==(r=l.current.openEvent)?void 0:r.type))return;const o=getDocument(f.floating.current);if(clearTimeout(E.current),v.current)return clearTimeout(m.current),R.current&&o.removeEventListener("pointermove",R.current),R.current=v.current({...e,tree:d,x:t.clientX,y:t.clientY,onClose(){b(),x()}}),void o.addEventListener("pointermove",R.current);x()}const a=f.reference.current;return isElement(a)?(a.addEventListener("mouseenter",t),a.addEventListener("mouseleave",o),()=>{a.removeEventListener("mouseenter",t),a.removeEventListener("mouseleave",o)}):void 0}),[n,x,e,r,v,l,u,g,i,d,c,b,f.reference,f.floating]),!n)return{};function h(e){p.current=e.pointerType}return{reference:{onPointerDown:h,onPointerEnter:h,onMouseMove(){i||0===c||(clearTimeout(E.current),E.current=setTimeout((()=>{y.current||a(!0)}),c))}},floating:{onMouseEnter(){clearTimeout(m.current)},onMouseLeave:()=>x(!1)}}},FloatingDelayGroupContext=React.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),useDelayGroupContext=()=>React.useContext(FloatingDelayGroupContext),FloatingDelayGroup=e=>{let{children:t,delay:n}=e;const[r,o]=React.useState({delay:n,initialDelay:n,currentId:null}),u=React.useCallback((e=>{o((t=>({...t,currentId:e})))}),[]);return React__default.default.createElement(FloatingDelayGroupContext.Provider,{value:React.useMemo((()=>({...r,setState:o,setCurrentId:u})),[r,o,u])},t)},useDelayGroup=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:o}=t;const{currentId:u,initialDelay:c,setState:i}=useDelayGroupContext(),a=useLatestRef(r);React.useEffect((()=>{u&&a.current&&(i((e=>({...e,delay:{open:1,close:getDelay(c,"close")}}))),u!==o&&a.current(!1))}),[o,a,i,u,c]),React.useEffect((()=>{!n&&u===o&&a.current&&(a.current(!1),i((e=>({...e,delay:c,currentId:null}))))}),[n,i,u,o,a,c])},useRole=function(e,t){let{open:n}=e,{enabled:r=!0,role:o="dialog"}=void 0===t?{}:t;const u=useId(),c=useId(),i={id:u,role:o};return r?"tooltip"===o?{reference:{"aria-describedby":n?u:void 0},floating:i}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":o,"aria-controls":n?u:void 0,..."listbox"===o&&{role:"combobox"},..."menu"===o&&{id:c}},floating:{...i,..."menu"===o&&{"aria-labelledby":c}}}:{}},useClick=function(e,t){let{open:n,onOpenChange:r,dataRef:o}=e,{enabled:u=!0,pointerDown:c=!1,toggle:i=!0}=void 0===t?{}:t;const a=React.useRef();return u?{reference:{...c&&{onPointerDown(e){var t;(a.current=e.pointerType,n)?i&&"pointerdown"===(null==(t=o.current.openEvent)?void 0:t.type)&&r(!1):r(!0);o.current.openEvent=e.nativeEvent}},onClick(e){if(c&&a.current)a.current=void 0;else{var t;if(n)i&&"click"===(null==(t=o.current.openEvent)?void 0:t.type)&&r(!1);else r(!0);o.current.openEvent=e.nativeEvent}}}}:{}},useDismiss=function(e,t){let{open:n,onOpenChange:r,refs:o,events:u,nodeId:c}=e,{enabled:i=!0,escapeKey:a=!0,outsidePointerDown:l=!0,referencePointerDown:s=!1,ancestorScroll:f=!1,bubbles:d=!0}=void 0===t?{}:t;const g=useFloatingTree(),v=useLatestRef(r),p=React.useCallback((()=>{var e;return null==(e=o.floating.current)?void 0:e.contains(getDocument(o.floating.current).activeElement)}),[o.floating]),m=React.useCallback((()=>{isHTMLElement(o.reference.current)&&o.reference.current.focus()}),[o.reference]);return React.useEffect((()=>{if(!n||!i)return;function e(e){if("Escape"===e.key){if(!d&&!p())return;u.emit("dismiss"),v.current(!1),m()}}function t(e){var t;const n=g&&getChildren(g,c).some((t=>{var n,r;return null==(n=t.context)||null==(r=n.refs.floating.current)?void 0:r.contains(e.target)}));null!=(t=o.floating.current)&&t.contains(e.target)||isElement(o.reference.current)&&o.reference.current.contains(e.target)||n||(d||p())&&(u.emit("dismiss"),v.current(!1),m())}function r(){v.current(!1)}const s=getDocument(o.floating.current);a&&s.addEventListener("keydown",e),l&&s.addEventListener("mousedown",t);const R=(f?[...isElement(o.reference.current)?reactDom.getOverflowAncestors(o.reference.current):[],...isElement(o.floating.current)?reactDom.getOverflowAncestors(o.floating.current):[]]:[]).filter((e=>{var t;return e!==(null==(t=s.defaultView)?void 0:t.visualViewport)}));return R.forEach((e=>e.addEventListener("scroll",r,{passive:!0}))),()=>{a&&s.removeEventListener("keydown",e),l&&s.removeEventListener("mousedown",t),R.forEach((e=>e.removeEventListener("scroll",r)))}}),[a,l,u,g,c,n,v,m,f,i,d,p,o.floating,o.reference]),i?{reference:{onPointerDown(){s&&(u.emit("dismiss"),r(!1))}}}:{}},useFocus=function(e,t){let{open:n,onOpenChange:r,dataRef:o,refs:u,events:c}=e,{enabled:i=!0,keyboardOnly:a=!0}=void 0===t?{}:t;const l=React.useRef(!1);return React.useEffect((()=>{var e;if(!i)return;const t=null!=(e=getDocument(u.floating.current).defaultView)?e:window;function r(){l.current=!n}function o(){setTimeout((()=>{l.current=!1}))}return t.addEventListener("focus",o),t.addEventListener("blur",r),()=>{t.removeEventListener("focus",o),t.removeEventListener("blur",r)}}),[u.floating,n,i]),React.useEffect((()=>{if(i)return c.on("dismiss",e),()=>{c.off("dismiss",e)};function e(){l.current=!0}}),[c,i]),i?{reference:{onPointerDown(e){let{pointerType:t}=e;l.current=!(!t||!a)},onFocus(e){var t,n,c;l.current||"focus"===e.type&&"mousedown"===(null==(t=o.current.openEvent)?void 0:t.type)&&isElement(u.reference.current)&&null!=(n=u.reference.current)&&n.contains(null==(c=o.current.openEvent)?void 0:c.target)||(o.current.openEvent=e.nativeEvent,r(!0))},onBlur(e){var t;const n=e.relatedTarget;null!=(t=u.floating.current)&&t.contains(n)||isElement(u.reference.current)&&u.reference.current.contains(n)||(l.current=!1,r(!1))}}}:{}},FOCUSABLE_ELEMENT_SELECTOR="a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,*[tabindex],*[contenteditable]",DEFAULT_ORDER=["content"];function focus(e){requestAnimationFrame((()=>{null==e||e.focus()}))}const useFocusTrap=function(e,t){let{open:n,onOpenChange:r,refs:o,nodeId:u}=e,{enabled:c=!0,initialContentFocus:i=0,order:a=DEFAULT_ORDER,modal:l=!0,inert:s=!1}=void 0===t?{}:t;const f=React.useRef(!1),d=React.useRef(null),g=React.useRef(null),v=useLatestRef(l),p=useLatestRef(a);"production"!==process.env.NODE_ENV&&l&&a.includes("reference")&&console.warn(["Floating UI: useFocusTrap() `order` array cannot contain",'"reference" while in `modal` mode.'].join(" "));const m=React.useCallback((()=>p.current.map((e=>{return isHTMLElement(o.reference.current)&&"reference"===e?o.reference.current:o.floating.current&&"floating"===e?o.floating.current:"content"===e?Array.from(null!=(t=null==(n=o.floating.current)?void 0:n.querySelectorAll(FOCUSABLE_ELEMENT_SELECTOR))?t:[]):null;var t,n})).filter(Boolean).flat()),[o.floating,o.reference]);index((()=>{const e=o.floating.current;if(!c||!n||!e||!l)return;function t(){const t=getDocument(e).createElement("div");return t.tabIndex=0,Object.assign(t.style,{position:"fixed",outline:"0",pointerEvents:"none"}),t.setAttribute("aria-hidden","true"),t}d.current||(d.current=t()),g.current||(g.current=t());const r=d.current,u=g.current;function i(e){var t;stopEvent(e);const n=m();null==(t=n[e.target===u?0:n.length-1])||t.focus()}return e.insertAdjacentElement("beforebegin",r),e.insertAdjacentElement("afterend",u),r.addEventListener("focus",i),u.addEventListener("focus",i),()=>{var e,t;r.removeEventListener("focus",i),u.removeEventListener("focus",i),null!=(e=r.parentNode)&&e.contains(r)&&r.parentNode.removeChild(r),null!=(t=u.parentNode)&&t.contains(u)&&u.parentNode.removeChild(u)}}),[c,n,l,s,m,o.floating]),React.useEffect((()=>{if(!c||!n||!s)return;function e(e){"Tab"===e.key&&stopEvent(e)}const t=getDocument(o.floating.current);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[c,n,s,o.floating]),React.useEffect((()=>{if(!c)return;const e=m();if(s){if(n){const t=e[0];t!==o.floating.current||t.contains(t.ownerDocument.activeElement)||focus(t)}}else n&&("number"===typeof i?focus(e[i]):i.current&&focus(e.find((e=>e===i.current))))}),[m,n,s,l,i,c,o.reference,o.floating]),React.useEffect((()=>{c&&!s&&!n&&v.current&&f.current&&isHTMLElement(o.reference.current)&&focus(o.reference.current)}),[n,c,s,v,o.reference]),React.useEffect((()=>{if(n&&l&&c&&o.floating.current)return ariaHidden.hideOthers(o.floating.current)}),[n,l,c,o.floating]),React.useEffect((()=>(f.current=!0,()=>{f.current=!1})),[]);const R=useFloatingTree();function E(e){var t;const n=e.relatedTarget;null!=(t=o.floating.current)&&t.contains(n)||!isElement(o.reference.current)||o.reference.current.contains(n)||R&&getChildren(R,u).some((e=>{var t,r,o;return null==(t=e.context)||null==(r=t.refs.floating)||null==(o=r.current)?void 0:o.contains(n)}))||r(!1)}return c?l?{floating:{"aria-modal":"true"}}:{reference:{onBlur:E},floating:{onBlur:E}}:{}};function usePrevious(e){const t=React.useRef();return index((()=>{t.current=e}),[e]),t.current}const ARROW_UP="ArrowUp",ARROW_DOWN="ArrowDown",ARROW_LEFT="ArrowLeft",ARROW_RIGHT="ArrowRight";function findNonDisabledIndex(e,t){let{startingIndex:n=-1,decrement:r=!1}=void 0===t?{}:t;const o=e.current;let u=n;do{var c,i;u+=r?-1:1}while(u>=0&&u<=o.length-1&&(null==o[u]||null!=(c=o[u])&&c.hasAttribute("disabled")||"true"===(null==(i=o[u])?void 0:i.getAttribute("aria-disabled"))));return u}function doSwitch(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function isMainOrientationKey(e,t){return doSwitch(t,e===ARROW_UP||e===ARROW_DOWN,e===ARROW_LEFT||e===ARROW_RIGHT)}function isMainOrientationToStartKey(e,t,n){return doSwitch(t,e===ARROW_UP,n?e===ARROW_RIGHT:e===ARROW_LEFT)}function isMainOrientationToEndKey(e,t,n){return doSwitch(t,e===ARROW_DOWN,n?e===ARROW_LEFT:e===ARROW_RIGHT)}function isCrossOrientationOpenKey(e,t,n){return doSwitch(t,n?e===ARROW_LEFT:e===ARROW_RIGHT,e===ARROW_DOWN)}function isCrossOrientationCloseKey(e,t,n){return doSwitch(t,n?e===ARROW_RIGHT:e===ARROW_LEFT,e===ARROW_UP)}function getMinIndex(e){return findNonDisabledIndex(e)}function getMaxIndex(e){return findNonDisabledIndex(e,{decrement:!0,startingIndex:e.current.length})}const useListNavigation=function(e,t){let{open:n,onOpenChange:r,refs:o}=e,{listRef:u,activeIndex:c,onNavigate:i,enabled:a=!0,selectedIndex:l=null,allowEscape:s=!1,loop:f=!1,nested:d=!1,rtl:g=!1,virtual:v=!1,focusItemOnOpen:p="auto",focusItemOnHover:m=!0,orientation:R="vertical"}=void 0===t?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:t;"production"!==process.env.NODE_ENV&&!f&&s&&console.warn(["Floating UI: `useListNavigation` looping must be enabled to allow","escaping."].join(" "));const E=useFloatingParentNodeId(),y=useFloatingTree(),x=usePrevious(n),b=React.useRef(p),h=React.useRef(null!=l?l:-1),T=React.useRef(""),O=React.useRef(!1),I=useLatestRef(i),w=React.useRef(!1),[D,F]=React.useState(),L=React.useCallback(((e,t)=>{var n,r;v?F(null==(n=e.current[t.current])?void 0:n.id):null==(r=e.current[t.current])||r.focus({preventScroll:!0})}),[v]);function C(e){"auto"===p&&(b.current=!e.pointerType)}function _(e){if(w.current=!0,d&&isCrossOrientationCloseKey(e.key,R,g))return stopEvent(e),r(!1),void(isHTMLElement(o.reference.current)&&o.reference.current.focus());const t=h.current,n=getMinIndex(u),c=getMaxIndex(u);if("Home"===e.key&&(h.current=n,i(h.current)),"End"===e.key&&(h.current=c,i(h.current)),isMainOrientationKey(e.key,R)){if(stopEvent(e),!v&&e.currentTarget.ownerDocument.activeElement===e.currentTarget)return h.current=null!=l?l:isMainOrientationToEndKey(e.key,R,g)?n:c,void i(h.current);isMainOrientationToEndKey(e.key,R,g)?h.current=f?t>=c?s&&t!==u.current.length?-1:n:findNonDisabledIndex(u,{startingIndex:t}):Math.min(c,findNonDisabledIndex(u,{startingIndex:t})):h.current=f?t<=n?s&&-1!==t?u.current.length:c:findNonDisabledIndex(u,{startingIndex:t,decrement:!0}):Math.max(n,findNonDisabledIndex(u,{startingIndex:t,decrement:!0})),i(h.current)}}return index((()=>{a&&(null!=l&&(h.current=l),!x&&n&&b.current&&(I.current(h.current),L(u,h)))}),[n,x,l,u,I,L,a]),index((()=>{a&&n&&(null===c?(!x&&b.current&&null==l||s)&&(h.current=s?-1:getMinIndex(u),I.current(c),L(u,h)):(h.current=c,I.current(c),L(u,h)))}),[n,x,c,l,d,u,I,L,a,E,s,o.floating,null==y?void 0:y.nodesRef]),index((()=>{if(null==l&&a){if(n&&(isMainOrientationKey(T.current,R)||b.current&&(" "===T.current||"Enter"===T.current))){const e=getMinIndex(u),t=getMaxIndex(u);h.current=isMainOrientationToStartKey(T.current,R,g)?s?u.current.length:t:s?-1:e,I.current(h.current),L(u,h)}T.current=""}}),[n,u,l,I,L,a,R,g,s]),index((()=>{a&&!n&&O.current&&null!=l&&isHTMLElement(o.reference.current)&&o.reference.current.focus()}),[o.reference,l,n,a]),index((()=>(O.current=!0,()=>{O.current=!1})),[]),index((()=>{var e;a&&(n||("auto"===p&&(b.current=!0),h.current=null!=(e=null!=l?l:c)?e:-1,I.current(null)))}),[n,l,c,a,p,I]),a?{reference:{...v&&n&&null!=c&&{"aria-activedescendant":D},onPointerEnter:C,onPointerDown:C,onKeyDown(e){if(w.current=!0,v&&n)return _(e);"auto"===p&&(b.current=!0),T.current=e.key,d?isCrossOrientationOpenKey(e.key,R,g)&&(stopEvent(e),n?(h.current=getMinIndex(u),i(h.current)):r(!0)):(isMainOrientationKey(e.key,R)&&(h.current=null==l?isMainOrientationToEndKey(e.key,R,g)?getMinIndex(u):getMaxIndex(u):l,stopEvent(e),r(!0),i(h.current)),v&&!n&&_(e))}},floating:{"aria-orientation":"both"===R?void 0:R,...v&&null!=c&&{"aria-activedescendant":D},onKeyDown:_,onPointerMove(){w.current=!1}},item:{onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...m&&{onPointerMove(e){let{currentTarget:t}=e;const n=t;if(n){const e=u.current.indexOf(n);-1!==e&&i(e)}},onPointerLeave(){var e;w.current||(i(null),v?(h.current=-1,L(u,h)):null==(e=o.floating.current)||e.focus({preventScroll:!0}))}}}}:{}},useTypeahead=function(e,t){var n;let{open:r,dataRef:o}=e,{listRef:u,activeIndex:c,onMatch:i=(()=>{}),enabled:a=!0,findMatch:l=null,resetMs:s=1e3,ignoreKeys:f=[],selectedIndex:d=null}=void 0===t?{listRef:{current:[]},activeIndex:null}:t;const g=React.useRef(),v=React.useRef(""),p=React.useRef(null!=(n=null!=d?d:c)?n:-1),m=React.useRef(null);function R(e){if(!e.currentTarget.contains(getDocument(e.currentTarget).activeElement))return;v.current.length>0&&" "!==v.current[0]&&(o.current.typing=!0," "===e.key&&stopEvent(e));const t=u.current;if(null==t||["Home","End","Escape","Enter","Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight",...f].includes(e.key))return;t.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&v.current===e.key&&(v.current="",p.current=m.current),v.current+=e.key,clearTimeout(g.current),g.current=setTimeout((()=>{v.current="",p.current=m.current,o.current.typing=!1}),s);const n=p.current,r=[...t.slice((null!=n?n:0)+1),...t.slice(0,(null!=n?n:0)+1)],c=l?l(r,v.current):r.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(v.current)))),a=c?t.indexOf(c):-1;-1!==a&&(i(a),m.current=a)}return index((()=>{r&&(clearTimeout(g.current),m.current=null,v.current="")}),[r]),index((()=>{var e;r&&""===v.current&&(p.current=null!=(e=null!=d?d:c)?e:-1)}),[r,d,c]),a?{reference:{onKeyDown:R},floating:{onKeyDown:R}}:{}};function useFloating(e){let{open:t=!1,onOpenChange:n=(()=>{}),placement:r,middleware:o,strategy:u,nodeId:c}=void 0===e?{}:e;const i=useFloatingTree(),a=React.useRef({}),l=React.useState((()=>createPubSub()))[0],s=reactDom.useFloating({placement:r,middleware:o,strategy:u}),f=React.useMemo((()=>({...s,dataRef:a,nodeId:c,events:l,open:t,onOpenChange:n})),[s,a,c,l,t,n]);return index((()=>{const e=null==i?void 0:i.nodesRef.current.find((e=>e.id===c));e&&(e.context=f)})),React.useMemo((()=>({context:f,...s})),[s,f])}exports.FloatingDelayGroup=FloatingDelayGroup,exports.FloatingFocusManager=FloatingFocusManager,exports.FloatingNode=FloatingNode,exports.FloatingOverlay=FloatingOverlay,exports.FloatingPortal=FloatingPortal,exports.FloatingTree=FloatingTree,exports.safePolygon=safePolygon,exports.useClick=useClick,exports.useDelayGroup=useDelayGroup,exports.useDelayGroupContext=useDelayGroupContext,exports.useDismiss=useDismiss,exports.useFloating=useFloating,exports.useFloatingNodeId=useFloatingNodeId,exports.useFloatingParentNodeId=useFloatingParentNodeId,exports.useFloatingTree=useFloatingTree,exports.useFocus=useFocus,exports.useFocusTrap=useFocusTrap,exports.useHover=useHover,exports.useId=useId,exports.useInteractions=useInteractions,exports.useListNavigation=useListNavigation,exports.useRole=useRole,exports.useTypeahead=useTypeahead,Object.keys(reactDom).forEach((function(e){"default"===e||exports.hasOwnProperty(e)||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return reactDom[e]}})}));